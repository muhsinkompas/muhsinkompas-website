{% extends "layout.html" %}

{% block content %}
    <!-- ============================================
         HERO SECTION - Center aligned profile
         Can be extracted to: templates/sections/hero.html
    ============================================= -->
    <section id="home" class="min-h-[80vh] flex items-center justify-center px-4">
        <div class="text-center">
            
            <!-- Profile Image with Grayscale Filter -->
            <div class="mb-8">
                <img 
                    src="{{ url_for('static', filename=images['profile']) }}"
                    alt="{{personal_info.name}} Profile Picture"
                    class="w-64 h-64 rounded-full mx-auto border border-zinc-800 grayscale hover:grayscale-0 transition-all duration-500"
                >
            </div>
            
            <!-- Hero Text -->
            <h1 class="text-4xl sm:text-5xl font-bold text-zinc-100 mb-4">
                {{ personal_info.name }}
            </h1>
            <p class="text-lg text-zinc-400 mb-8 max-w-xl mx-auto">
                {{ personal_info.tagline }}
            </p>
            
            <!-- CTA Buttons -->
            <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
                <!-- Primary Button -->
                <a href="#projects" 
                   class="px-6 py-3 bg-zinc-100 text-zinc-950 font-medium text-sm rounded hover:bg-white transition-colors">
                    View Projects
                </a>
                <!-- Secondary Outline Button -->
                <a href="{{ url_for('static', filename=files['resume']) }}" download
                   class="px-6 py-3 border border-zinc-700 text-zinc-300 font-medium text-sm rounded hover:border-zinc-500 hover:text-zinc-100 transition-colors">
                    <i class="fa-solid fa-download mr-2"></i>Download CV
                </a>
            </div>
        </div>
    </section>

    <!-- ============================================
         ABOUT SECTION - Two column with timeline
    ============================================= -->
    <section id="about" class="py-24 px-4 border-t border-zinc-800">
        <div class="max-w-6xl mx-auto">
            <h2 class="text-3xl font-bold text-zinc-100 mb-12">About</h2>
            <div class="grid md:grid-cols-2 gap-12 lg:gap-16">
                <div>
                    <h3 class="text-xl font-semibold text-zinc-100 mb-4">Professional Bio</h3>
                    <div class="space-y-4 text-zinc-400 leading-relaxed">
                        {% for p in about_me.professional_bio %}
                            <p>{{ p }}</p>
                        {% endfor %}
                    </div>
                </div>
                <div>
                    <h3 class="text-xl font-semibold text-zinc-100 mb-6">Timeline</h3>
                    <div class="relative border-l border-zinc-800 pl-6 space-y-8">
                        {% for item in timeline %}
                            <div class="relative">
                                <div class="absolute -left-[25px] top-1 w-2 h-2 {{ item.dot_class }} rounded-full"></div>
                                
                                <!-- Date Range -->
                                <span class="text-xs text-zinc-500 font-mono uppercase tracking-wider">{{ item.display_range }}</span>
                                
                                {% if item.type == 'work' %}
                                    <!-- Work Entry -->
                                    <h4 class="text-zinc-100 font-medium mt-1 text-base">{{ item.role }}</h4>
                                    <p class="text-zinc-400 text-sm">{{ item.organization }}</p>
                                    {% if item.description %}
                                        <p class="text-zinc-400 text-sm mt-2 leading-relaxed">{{ item.description }}</p>
                                    {% endif %}
                                    
                                {% elif item.type == 'education' %}
                                    <!-- Education Entry -->
                                    <h4 class="text-zinc-100 font-medium mt-1 text-base">{{ item.degree }}</h4>
                                    <p class="text-zinc-400 text-sm">{{ item.organization }}</p>
                                    
                                    <!-- Thesis Information -->
                                    {% if item.thesis %}
                                        <div class="mt-2">
                                            <span class="text-zinc-500 text-sm font-medium">Thesis: </span>
                                            {% if item.thesis.link %}
                                                <a href="{{ item.thesis.link }}" 
                                                   target="_blank" 
                                                   class="text-zinc-300 text-sm hover:text-zinc-100 transition-colors underline decoration-zinc-600 hover:decoration-zinc-400">
                                                    {{ item.thesis.title }}
                                                    <i class="fa-solid fa-external-link-alt text-xs ml-1"></i>
                                                </a>
                                            {% else %}
                                                <span class="text-zinc-300 text-sm">{{ item.thesis.title }}</span>
                                            {% endif %}
                                        </div>
                                    {% endif %}
                                    
                                    {% if item.description %}
                                        <p class="text-zinc-400 text-sm mt-2 leading-relaxed">{{ item.description }}</p>
                                    {% endif %}
                                    
                                {% elif item.type == 'project' %}
                                    <!-- Project Entry -->
                                    <h4 class="text-zinc-100 font-medium mt-1 text-base">{{ item.title }}</h4>
                                    <p class="text-zinc-400 text-sm">{{ item.organization }}</p>
                                    {% if item.description %}
                                        <p class="text-zinc-400 text-sm mt-2 leading-relaxed">{{ item.description }}</p>
                                    {% endif %}
                                    
                                {% else %}
                                    <!-- Fallback -->
                                    <h4 class="text-zinc-100 font-medium mt-1">{{ item.display_title }}</h4>
                                    {% if item.display_subtitle %}
                                        <p class="text-zinc-400 text-sm">{{ item.display_subtitle }}</p>
                                    {% endif %}
                                {% endif %}
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ============================================
         PROJECTS SECTION - Featured projects grid
    ============================================= -->
    <section id="projects" class="py-24 px-4 border-t border-zinc-800">
        <div class="max-w-6xl mx-auto">
            <div class="flex items-center justify-between mb-12">
                <div>
                    <h2 class="text-3xl font-bold text-zinc-100 mb-2">Featured Projects</h2>
                    <p class="text-zinc-400">Selected works from my portfolio</p>
                </div>
                <a href="{{ url_for('projects_list') }}" class="text-zinc-400 hover:text-zinc-100 text-sm transition-colors hidden sm:block">
                    View all projects <i class="fa-solid fa-arrow-right ml-1"></i>
                </a>
            </div>
            
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                {% if featured_projects %}
                    {% for project in featured_projects %}
                        <article class="group border border-zinc-800 rounded-lg overflow-hidden hover:border-zinc-700 transition-colors">
                            <!-- Project Image/Icon -->
                            <a href="{{ url_for('project_detail', slug=project.slug) }}" class="block">
                                <div class="aspect-video bg-zinc-900 overflow-hidden">
                                    {% if project.featured_image %}
                                        <img 
                                            src="{{ url_for('static', filename=project.featured_image) }}"
                                            alt="{{ project.title }}"
                                            class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
                                        >
                                    {% else %}
                                        <div class="w-full h-full flex items-center justify-center">
                                            {% if project.project_type == 'github' %}
                                                <i class="fa-brands fa-github text-5xl text-zinc-700 group-hover:text-zinc-600 transition-colors"></i>
                                            {% else %}
                                                <i class="fa-solid fa-folder-open text-5xl text-zinc-700 group-hover:text-zinc-600 transition-colors"></i>
                                            {% endif %}
                                        </div>
                                    {% endif %}
                                </div>
                            </a>
                            
                            <!-- Project Content -->
                            <div class="p-5">
                                <a href="{{ url_for('project_detail', slug=project.slug) }}" class="block">
                                    <h3 class="text-zinc-100 font-semibold mb-2 group-hover:text-zinc-300 transition-colors">
                                        {{ project.title }}
                                    </h3>
                                </a>
                                <p class="text-zinc-400 text-sm mb-4 line-clamp-2">{{ project.description }}</p>
                                
                                <!-- Technologies/Tags -->
                                <div class="flex flex-wrap gap-2 mb-3">
                                    {% for tech in project.technologies[:3] %}
                                        <span class="px-2 py-1 bg-zinc-900 text-zinc-400 text-xs rounded font-mono">{{ tech }}</span>
                                    {% endfor %}
                                    {% if project.technologies|length > 3 %}
                                        <span class="text-zinc-600 text-xs">+{{ project.technologies|length - 3 }}</span>
                                    {% endif %}
                                </div>
                                
                                <!-- GitHub Stats (if applicable) -->
                                {% if project.project_type == 'github' and project.github_url %}
                                    <div class="flex items-center gap-4 text-xs text-zinc-500">
                                        {% if project.stars > 0 %}
                                            <span class="flex items-center gap-1">
                                                <i class="fa-solid fa-star text-yellow-500"></i>{{ project.stars }}
                                            </span>
                                        {% endif %}
                                        {% if project.forks > 0 %}
                                            <span class="flex items-center gap-1">
                                                <i class="fa-solid fa-code-fork"></i>{{ project.forks }}
                                            </span>
                                        {% endif %}
                                    </div>
                                {% endif %}
                            </div>
                        </article>
                    {% endfor %}
                {% else %}
                    <!-- Fallback when no projects exist -->
                    <div class="md:col-span-3 text-center py-12 border border-zinc-800 rounded-lg">
                        <i class="fa-solid fa-folder-open text-5xl text-zinc-800 mb-4"></i>
                        <h3 class="text-zinc-400 font-medium mb-2">No projects yet</h3>
                        <p class="text-zinc-600 text-sm">Check back soon for my latest work!</p>
                    </div>
                {% endif %}
            </div>
            
            <!-- Mobile View All Link -->
            <div class="mt-8 text-center sm:hidden">
                <a href="{{ url_for('projects_list') }}" class="text-zinc-400 hover:text-zinc-100 text-sm transition-colors">
                    View all projects <i class="fa-solid fa-arrow-right ml-1"></i>
                </a>
            </div>
        </div>
    </section>

    <!-- ============================================
         KNOWLEDGE BASE - Interactive Terminal windows
    ============================================= -->
    <section id="knowledge" class="py-24 px-4 border-t border-zinc-800">
        <div class="max-w-6xl mx-auto">
            <h2 class="text-3xl font-bold text-zinc-100 mb-4">Knowledge Base</h2>
            <p class="text-zinc-400 mb-12">Commands and snippets I use daily</p>
            
            <!-- Terminal Windows Grid -->
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                {% for terminal in terminals %}
                    <div class="terminal-window border border-zinc-800 rounded-lg overflow-hidden hover:border-zinc-700 transition-all cursor-pointer" 
                         data-terminal-id="{{ terminal.id }}"
                         onclick="bringToFront(this)">
                        <!-- Terminal Header -->
                        <div class="bg-zinc-900 px-4 py-3 flex items-center gap-2">
                            <div class="w-3 h-3 rounded-full bg-red-500"></div>
                            <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                            <div class="w-3 h-3 rounded-full bg-green-500"></div>
                            <span class="ml-2 text-zinc-500 text-xs font-mono">{{ terminal.title }}</span>
                        </div>
                        
                        <!-- Terminal Content -->
                        <div class="bg-black p-4 font-mono text-sm min-h-[200px]">
                            {% for cmd in terminal.commands %}
                                {% if cmd.comment %}
                                    <p class="text-zinc-500 mb-1"># {{ cmd.comment }}</p>
                                {% endif %}
                                <p class="text-green-400 {% if not loop.last %}mb-3{% endif %}">$ {{ cmd.command }}</p>
                            {% endfor %}
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <style>
        .terminal-window {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .terminal-window:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        .terminal-window.active {
            z-index: 10;
            border-color: #3f3f46 !important;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.7);
        }
    </style>

    <!-- ============================================
         WIKI / BLOG SECTION - Latest posts with Thumbnails
    ============================================= -->
    <section id="wiki" class="py-24 px-4 border-t border-zinc-800">
        <div class="max-w-6xl mx-auto">
            
            <!-- Section Header -->
            <div class="flex items-center justify-between mb-12">
                <div>
                    <h2 class="text-3xl font-bold text-zinc-100 mb-2">Latest from Wiki</h2>
                    <p class="text-zinc-400">Technical articles and notes</p>
                </div>
                <a href="{{ url_for('blog_list') }}" class="text-zinc-400 hover:text-zinc-100 text-sm transition-colors hidden sm:block">
                    View all posts <i class="fa-solid fa-arrow-right ml-1"></i>
                </a>
            </div>
            
            <!-- Blog Posts Grid with Thumbnails -->
            <div class="grid md:grid-cols-3 gap-6">
                {% if recent_posts %}
                    {% for post in recent_posts %}
                        <article class="group border border-zinc-800 rounded-lg overflow-hidden hover:border-zinc-700 transition-all duration-300">
                            <!-- Thumbnail -->
                            <a href="{{ url_for('blog_detail', slug=post.slug) }}" class="block">
                                <div class="aspect-video bg-zinc-900 overflow-hidden">
                                    {% if post.featured_image %}
                                        <img 
                                            src="{{ url_for('static', filename=post.featured_image) }}"
                                            alt="{{ post.title }}"
                                            class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
                                        >
                                    {% else %}
                                        <!-- Placeholder icon when no thumbnail -->
                                        <div class="w-full h-full flex items-center justify-center">
                                            <i class="fa-solid fa-newspaper text-4xl text-zinc-800 group-hover:text-zinc-700 transition-colors"></i>
                                        </div>
                                    {% endif %}
                                </div>
                            </a>
                            
                            <!-- Post Content -->
                            <div class="p-5">
                                <!-- Meta: Date & Reading Time -->
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="text-xs text-zinc-600 font-mono">{{ post.date_iso }}</span>
                                    <span class="text-zinc-700">â€¢</span>
                                    <span class="text-xs text-zinc-600">{{ post.reading_time }} min</span>
                                </div>
                                
                                <!-- Title -->
                                <a href="{{ url_for('blog_detail', slug=post.slug) }}" class="block">
                                    <h3 class="text-zinc-100 font-medium group-hover:text-zinc-300 transition-colors line-clamp-2">
                                        {{ post.title }}
                                    </h3>
                                </a>
                                
                                <!-- Excerpt -->
                                <p class="text-zinc-500 text-sm mt-2 line-clamp-2">
                                    {{ post.excerpt }}
                                </p>
                                
                                <!-- Tags -->
                                {% if post.tags %}
                                    <div class="flex flex-wrap gap-1 mt-3">
                                        {% for tag in post.tags[:2] %}
                                            <span class="px-2 py-0.5 bg-zinc-900 text-zinc-500 text-xs rounded font-mono">
                                                {{ tag }}
                                            </span>
                                        {% endfor %}
                                        {% if post.tags|length > 2 %}
                                            <span class="px-2 py-0.5 text-zinc-600 text-xs">+{{ post.tags|length - 2 }}</span>
                                        {% endif %}
                                    </div>
                                {% endif %}
                            </div>
                        </article>
                    {% endfor %}
                {% else %}
                    <!-- Fallback when no posts exist -->
                    <div class="md:col-span-3 text-center py-12 border border-zinc-800 rounded-lg">
                        <i class="fa-solid fa-pen-to-square text-5xl text-zinc-800 mb-4"></i>
                        <h3 class="text-zinc-400 font-medium mb-2">No blog posts yet</h3>
                        <p class="text-zinc-600 text-sm">Check back soon for technical articles and notes!</p>
                    </div>
                {% endif %}
            </div>
            
            <!-- Mobile View All Link -->
            <div class="mt-8 text-center sm:hidden">
                <a href="{{ url_for('blog_list') }}" class="text-zinc-400 hover:text-zinc-100 text-sm transition-colors">
                    View all posts <i class="fa-solid fa-arrow-right ml-1"></i>
                </a>
            </div>
        </div>
    </section>

    <!-- ============================================
         HOBBIES SECTION - Panoramic tabbed interface
    ============================================= -->
    <section id="hobbies" class="py-24 px-4 border-t border-zinc-800">
        <div class="max-w-6xl mx-auto">
            <h2 class="text-3xl font-bold text-zinc-100 mb-4">Hobbies</h2>
            <p class="text-zinc-400 mb-8">What I do when I'm not coding...</p>
            <div class="flex flex-wrap gap-2 mb-6">
                {% for hobby_id, hobby in hobbies.items() %}
                    <button class="hobby-tab px-4 py-2 text-sm font-medium rounded transition-colors {{ 'bg-zinc-100 text-zinc-950' if loop.first else 'bg-zinc-900 text-zinc-400 hover:text-zinc-100' }}" data-tab="{{ hobby_id }}">
                        <i class="{{ hobby.logo }} mr-2"></i>{{ hobby.title }}
                    </button>
                {% endfor %}
            </div>
            <div class="relative">
                {% for hobby_id, hobby in hobbies.items() %}
                    <div id="panel-{{ hobby_id }}" class="hobby-panel {{ '' if loop.first else 'hidden' }}">
                        <div class="relative rounded-lg overflow-hidden border border-zinc-800" style="background: linear-gradient(to right, rgba(0,0,0,0.9), rgba(0,0,0,0.7)), url('{{ url_for('static', filename=hobby.background) }}') center/cover no-repeat;">
                            <div class="p-8 md:p-12 min-h-[300px] flex flex-col justify-end">
                                <span class="text-xs text-zinc-500 font-mono mb-2">{{ hobby.label }}</span>
                                <h3 class="text-2xl md:text-3xl font-bold text-zinc-100 mb-3">{{ hobby.title }}</h3>
                                <p class="text-zinc-400 max-w-2xl leading-relaxed">{{ hobby.description }}</p>
                                <div class="flex gap-4 mt-6">
                                    {% for tag in hobby.tags %}
                                        <span class="text-xs text-zinc-500 border border-zinc-800 px-3 py-1 rounded">{{ tag }}</span>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- ============================================
         CONTACT SECTION - Contact info
    ============================================= -->
    <section id="contact" class="py-24 px-4 border-t border-zinc-800">
        <div class="max-w-6xl mx-auto">
            <h2 class="text-3xl font-bold text-zinc-100 mb-4">Contact</h2>
            <p class="text-zinc-400 mb-12">Let's Collaborate</p>
            <div class="grid md:grid-cols-2 gap-12">
                <div class="space-y-6">
                    <div>
                        <span class="text-xs text-zinc-500 font-mono block mb-2">EMAIL</span>
                        <a href="mailto:{{ contact.email }}" class="text-zinc-100 hover:text-zinc-300 transition-colors">{{ contact.email }}</a>
                    </div>
                    <div>
                        <span class="text-xs text-zinc-500 font-mono block mb-2">LOCATION</span>
                        <p class="text-zinc-400">{{ contact.location }}</p>
                    </div>
                    <div>
                        <span class="text-xs text-zinc-500 font-mono block mb-2">AVAILABILITY</span>
                        <p class="text-zinc-400">{{ contact.availability }}</p>
                    </div>
                </div>
                <div>
                    <span class="text-xs text-zinc-500 font-mono block mb-4">CONNECT</span>
                    <div class="flex flex-wrap gap-4">
                        <a href="{{ contact.socials.github }}" target="_blank" class="flex items-center gap-2 px-4 py-2 border border-zinc-800 rounded text-zinc-400 hover:text-zinc-100 hover:border-zinc-700 transition-colors">
                            <i class="fa-brands fa-github"></i><span class="text-sm">GitHub</span>
                        </a>
                        <a href="{{ contact.socials.linkedin }}" target="_blank" class="flex items-center gap-2 px-4 py-2 border border-zinc-800 rounded text-zinc-400 hover:text-zinc-100 hover:border-zinc-700 transition-colors">
                            <i class="fa-brands fa-linkedin"></i><span class="text-sm">LinkedIn</span>
                        </a>
                        <a href="{{ contact.socials.twitter }}" target="_blank" class="flex items-center gap-2 px-4 py-2 border border-zinc-800 rounded text-zinc-400 hover:text-zinc-100 hover:border-zinc-700 transition-colors">
                            <i class="fa-brands fa-x-twitter"></i><span class="text-sm">Twitter</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

{% endblock %}

{% block scripts %}
<style>
    .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }
</style>

<script>
    // Terminal window interaction
    function bringToFront(element) {
        // Remove active class from all terminals
        document.querySelectorAll('.terminal-window').forEach(terminal => {
            terminal.classList.remove('active');
        });
        
        // Add active class to clicked terminal
        element.classList.add('active');
    }
</script>
{% endblock %}